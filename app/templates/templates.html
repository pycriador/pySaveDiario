{% extends "base.html" %}
{% block title %}Templates de Compartilhamento{% endblock %}

{% block content %}
<section>
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-4">
    <div>
      <p class="eyebrow">Playbook social</p>
      <h1 class="mb-0">Templates disponíveis</h1>
      <p class="muted mb-0">Padronize posts e compartilhe com um clique.</p>
    </div>
    <a class="btn btn-outline-light btn-sm" href="{{ url_for('web.dashboard') }}">Voltar ao painel</a>
  </div>

  <div class="form-card mb-4">
    <div class="form-card-header">
      <h2>Novo template</h2>
      <p class="muted mb-0">Escolha canais e defina o corpo que será usado nas publicações.</p>
    </div>
    <form method="post" class="row g-3">
      {{ form.hidden_tag() }}
      <div class="col-md-6">
        <label class="form-label" for="{{ form.name.id }}">Nome</label>
        {{ form.name(class="form-control") }}
      </div>
      <div class="col-md-6">
        <label class="form-label" for="{{ form.slug.id }}">Slug</label>
        {{ form.slug(class="form-control") }}
      </div>
      <div class="col-12">
        <label class="form-label" for="{{ form.description.id }}">Descrição</label>
        {{ form.description(class="form-control") }}
      </div>
      <div class="col-12">
        <label class="form-label" for="{{ form.channels.id }}">Canais</label>
        {{ form.channels(class="form-control") }}
        <small class="muted">Separe por vírgula (ex: instagram, facebook, whatsapp).</small>
      </div>
      <div class="col-12">
        <label class="form-label" for="{{ form.body.id }}">Corpo do template</label>
        {{ form.body(class="form-control", rows="4") }}
      </div>
      <div class="col-12 text-end">
        {{ form.submit_template(class="btn btn-primary px-4") }}
      </div>
    </form>
  </div>

  <div class="grid two">
    {% for template in templates %}
    <article class="panel card">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <h3>{{ template.name }}</h3>
          <p class="muted">{{ template.description or "Sem descrição." }}</p>
        </div>
        <span class="badge bg-primary bg-opacity-25 text-white">{{ template.channel_list|length }} canais</span>
      </div>
      <small class="muted d-block mb-2">Canais: {{ template.channel_list | join(', ') }}</small>
      <pre class="mt-3">{{ template.body }}</pre>
    </article>
    {% else %}
    <p>Nenhum template cadastrado no momento.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}

