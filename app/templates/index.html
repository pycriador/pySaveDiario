{% extends "base.html" %}
{% block title %}pySave Diário · Central de Ofertas{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="hero-modern">
  <div class="hero-content">
    <div class="hero-badge">
      <i class="bi bi-rocket-takeoff-fill"></i>
      <span>Plataforma Completa de Ofertas</span>
    </div>
    
    <h1 class="hero-title">
      Centralize todas as suas 
      <span class="gradient-text">ofertas e cupons</span>
      em um só lugar
    </h1>
    
    <p class="hero-description">
      Sistema completo para gerenciar ofertas, criar templates para redes sociais, 
      organizar cupons de desconto e compartilhar promoções com apenas um clique. 
      Tudo com uma API REST poderosa e interface moderna.
    </p>
    
    <div class="hero-actions">
      {% if current_user.is_authenticated %}
      <a class="btn btn-hero-primary" href="{{ url_for('web.dashboard') }}">
        <i class="bi bi-speedometer2"></i>
        Ir para Dashboard
      </a>
      <a class="btn btn-hero-secondary" href="{{ url_for('web.offers') }}">
        <i class="bi bi-tags-fill"></i>
        Ver Ofertas
      </a>
      {% else %}
      <a class="btn btn-hero-primary" href="{{ url_for('web.login') }}">
        <i class="bi bi-box-arrow-in-right"></i>
        Começar Agora
      </a>
      <a class="btn btn-hero-secondary" href="{{ url_for('web.offers') }}">
        <i class="bi bi-search"></i>
        Explorar Ofertas
      </a>
      {% endif %}
    </div>
  </div>
  
  <!-- Stats Cards -->
  <div class="hero-stats">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="bi bi-tags-fill"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ total_offers }}</div>
        <div class="stat-label">Ofertas</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <i class="bi bi-ticket-perforated-fill"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ total_coupons }}</div>
        <div class="stat-label">Cupons Ativos</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <i class="bi bi-graph-up-arrow"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">R$ {{ '%.0f'|format(total_savings) }}</div>
        <div class="stat-label">Economia Total</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <i class="bi bi-file-earmark-text-fill"></i>
      </div>
      <div class="stat-info">
        <div class="stat-value">{{ total_templates }}</div>
        <div class="stat-label">Templates</div>
      </div>
    </div>
  </div>
</section>

<!-- Features Section -->
<section class="features-section">
  <div class="section-header text-center mb-5">
    <h2 class="section-title">
      <i class="bi bi-stars"></i>
      Funcionalidades Principais
    </h2>
    <p class="section-subtitle">
      Tudo que você precisa para gerenciar ofertas e cupons profissionalmente
    </p>
  </div>
  
  <div class="grid three">
    <div class="feature-card">
      <div class="feature-icon blue">
        <i class="bi bi-tags-fill"></i>
      </div>
      <h3 class="feature-title">Gestão de Ofertas</h3>
      <p class="feature-description">
        Crie, edite e organize ofertas com preços, imagens, descrições e datas de expiração. 
        Acompanhe descontos e compare preços entre vendedores.
      </p>
      <ul class="feature-list">
        <li><i class="bi bi-check-circle-fill"></i> Upload de imagens de produtos</li>
        <li><i class="bi bi-check-circle-fill"></i> Cálculo automático de desconto</li>
        <li><i class="bi bi-check-circle-fill"></i> Filtros avançados</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon green">
        <i class="bi bi-ticket-perforated-fill"></i>
      </div>
      <h3 class="feature-title">Cupons Inteligentes</h3>
      <p class="feature-description">
        Cadastre cupons com desconto percentual ou fixo, defina limite máximo de desconto 
        e compartilhe automaticamente junto com as ofertas.
      </p>
      <ul class="feature-list">
        <li><i class="bi bi-check-circle-fill"></i> Desconto % ou valor fixo</li>
        <li><i class="bi bi-check-circle-fill"></i> Limite máximo configurável</li>
        <li><i class="bi bi-check-circle-fill"></i> Ativação/desativação rápida</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon purple">
        <i class="bi bi-share-fill"></i>
      </div>
      <h3 class="feature-title">Compartilhamento Social</h3>
      <p class="feature-description">
        Templates personalizados para cada rede social com variáveis dinâmicas. 
        Gere textos formatados para WhatsApp, Instagram, Telegram e mais.
      </p>
      <ul class="feature-list">
        <li><i class="bi bi-check-circle-fill"></i> Templates com variáveis</li>
        <li><i class="bi bi-check-circle-fill"></i> Formatação automática por rede</li>
        <li><i class="bi bi-check-circle-fill"></i> Copiar com um clique</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon orange">
        <i class="bi bi-gear-fill"></i>
      </div>
      <h3 class="feature-title">Administração Completa</h3>
      <p class="feature-description">
        Gerencie vendedores, categorias, fabricantes e configurações de redes sociais. 
        Controle total sobre todos os aspectos do sistema.
      </p>
      <ul class="feature-list">
        <li><i class="bi bi-check-circle-fill"></i> Cadastro de vendedores</li>
        <li><i class="bi bi-check-circle-fill"></i> Categorias e fabricantes</li>
        <li><i class="bi bi-check-circle-fill"></i> Config. de redes sociais</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon red">
        <i class="bi bi-code-square"></i>
      </div>
      <h3 class="feature-title">API REST Completa</h3>
      <p class="feature-description">
        API RESTful com documentação completa. Crie integrações, automações e 
        desenvolva apps móveis usando todos os recursos do sistema.
      </p>
      <ul class="feature-list">
        <li><i class="bi bi-check-circle-fill"></i> Endpoints para tudo</li>
        <li><i class="bi bi-check-circle-fill"></i> Autenticação Bearer</li>
        <li><i class="bi bi-check-circle-fill"></i> Docs interativas</li>
      </ul>
    </div>
    
    <div class="feature-card">
      <div class="feature-icon teal">
        <i class="bi bi-palette-fill"></i>
      </div>
      <h3 class="feature-title">Editor Visual Rico</h3>
      <p class="feature-description">
        Editor de texto com formatação visual para descrições e templates. 
        Interface moderna com suporte completo aos temas claro e escuro.
      </p>
      <ul class="feature-list">
        <li><i class="bi bi-check-circle-fill"></i> Editor WYSIWYG</li>
        <li><i class="bi bi-check-circle-fill"></i> Temas claro e escuro</li>
        <li><i class="bi bi-check-circle-fill"></i> Formatação inteligente</li>
      </ul>
    </div>
  </div>
</section>

<!-- Highlighted Offers Section -->
{% if offers %}
<section class="offers-highlight">
  <div class="section-header text-center mb-5">
    <h2 class="section-title">
      <i class="bi bi-fire"></i>
      Ofertas em Destaque
    </h2>
    <p class="section-subtitle">
      Confira as melhores promoções adicionadas recentemente
    </p>
  </div>
  
  <div class="grid three">
    {% for offer in offers %}
    <article class="panel elegant-offer-card home-offer-card">
      <!-- Product Image -->
      {% if offer.product and offer.product.image_url %}
      <div class="product-image-container mb-3">
        <img src="{{ offer.product.image_url }}" 
             alt="{{ offer.product.name }}" 
             class="product-image img-fluid rounded"
             loading="lazy">
      </div>
      {% else %}
      <div class="product-image-placeholder mb-3">
        <i class="bi bi-image"></i>
      </div>
      {% endif %}
      
      <!-- Product Title -->
      <h3 class="offer-card-title mb-3">
        {{ offer.product.name if offer.product else 'Oferta' }}
      </h3>
      
      <!-- Price Section -->
      <div class="price-section mb-3">
        {% if offer.old_price %}
        <div class="old-price mb-2">
          <small class="text-muted text-decoration-line-through">
            {{ offer.currency|currency_symbol }} {{ '%.2f'|format(offer.old_price) }}
          </small>
          {% if offer.old_price_value > offer.price_value %}
          <span class="badge bg-danger ms-2">
            -{{ '%.0f'|format(((offer.old_price_value - offer.price_value) / offer.old_price_value * 100)) }}%
          </span>
          {% endif %}
        </div>
        {% endif %}
        <div class="current-price">
          <span class="price-value">{{ offer.currency|currency_symbol }} {{ '%.2f'|format(offer.price_value) }}</span>
        </div>
      </div>
      
      <!-- Vendor Badge -->
      <div class="vendor-badge mb-3">
        <i class="bi bi-shop"></i>
        <strong>{{ offer.vendor_name }}</strong>
      </div>
      
      <!-- Action Button -->
      {% if offer.offer_url %}
      <a href="{{ offer.offer_url }}" 
         target="_blank" 
         rel="noopener noreferrer" 
         class="btn btn-sm btn-primary w-100">
        <i class="bi bi-box-arrow-up-right"></i> Ver Oferta
      </a>
      {% endif %}
    </article>
    {% endfor %}
  </div>
  
  <div class="text-center mt-5">
    <a href="{{ url_for('web.offers') }}" class="btn btn-outline-primary btn-lg">
      <i class="bi bi-grid-3x3-gap-fill"></i> Ver Todas as Ofertas
    </a>
  </div>
</section>
{% endif %}

<!-- Call to Action Section -->
<section class="cta-section">
  <div class="cta-content">
    <h2 class="cta-title">
      <i class="bi bi-lightning-charge-fill"></i>
      Pronto para começar?
    </h2>
    <p class="cta-description">
      Cadastre ofertas, crie templates e compartilhe em segundos. 
      Economize tempo e aumente suas vendas!
    </p>
    <div class="cta-actions">
      {% if current_user.is_authenticated %}
      <a href="{{ url_for('web.create_offer') }}" class="btn btn-cta-primary">
        <i class="bi bi-plus-circle-fill"></i> Criar Primeira Oferta
      </a>
      <a href="{{ url_for('web.api_documentation') }}" class="btn btn-cta-secondary">
        <i class="bi bi-book-fill"></i> Ver Documentação
      </a>
      {% else %}
      <a href="{{ url_for('web.login') }}" class="btn btn-cta-primary">
        <i class="bi bi-box-arrow-in-right"></i> Fazer Login
      </a>
      <a href="{{ url_for('web.api_documentation') }}" class="btn btn-cta-secondary">
        <i class="bi bi-book-fill"></i> Documentação da API
      </a>
      {% endif %}
    </div>
  </div>
</section>

<!-- Footer Info -->
<section class="footer-info">
  <div class="grid three">
    <div class="info-block">
      <i class="bi bi-shield-check"></i>
      <h4>Seguro e Confiável</h4>
      <p>Sistema com autenticação robusta e proteção CSRF completa</p>
    </div>
    
    <div class="info-block">
      <i class="bi bi-lightning-fill"></i>
      <h4>Rápido e Eficiente</h4>
      <p>Interface otimizada com carregamento instantâneo</p>
    </div>
    
    <div class="info-block">
      <i class="bi bi-phone-fill"></i>
      <h4>100% Responsivo</h4>
      <p>Funciona perfeitamente em desktop, tablet e mobile</p>
    </div>
  </div>
</section>

{% endblock %}
