{% extends "base.html" %}

{% block title %}Compartilhar Oferta - {{ super() }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="page-title">
      <i class="bi bi-share"></i> Compartilhar Oferta
    </h2>
    <a href="{{ url_for('web.offers') }}" class="btn btn-outline-secondary btn-back">
      <i class="bi bi-arrow-left"></i> Voltar
    </a>
  </div>

  <!-- Offer Info Card -->
  <div class="card mb-4" style="background: var(--panel-solid); border: 1px solid var(--border-color);">
    <div class="card-header">
      <h5 class="mb-0"><i class="bi bi-tag"></i> Informa√ß√µes da Oferta</h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-8">
          <h4 class="mb-3" style="color: var(--text-primary);">{{ offer.product.name if offer.product else 'Sem nome' }}</h4>
          {% if offer.product and offer.product.description %}
          <p class="offer-description mb-3">{{ offer.product.description }}</p>
          {% endif %}
          <div class="row">
            <div class="col-md-6">
              <p class="mb-2 offer-info-text">
                <strong><i class="bi bi-shop"></i> Vendedor:</strong> 
                <span class="offer-value">{{ offer.vendor_name or 'N/A' }}</span>
              </p>
              {% if offer.seller %}
              <p class="mb-2 offer-info-text">
                <strong><i class="bi bi-person-badge"></i> Seller:</strong> 
                <span class="offer-value">{{ offer.seller.name }}</span>
              </p>
              {% endif %}
              {% if offer.category %}
              <p class="mb-2 offer-info-text">
                <strong><i class="bi bi-folder"></i> Categoria:</strong> 
                <span class="offer-value">{{ offer.category.name }}</span>
              </p>
              {% endif %}
              {% if offer.manufacturer %}
              <p class="mb-2 offer-info-text">
                <strong><i class="bi bi-building"></i> Fabricante:</strong> 
                <span class="offer-value">{{ offer.manufacturer.name }}</span>
              </p>
              {% endif %}
            </div>
            <div class="col-md-6">
              <p class="mb-2 offer-info-text">
                <strong><i class="bi bi-currency-dollar"></i> Pre√ßo:</strong> 
                <span class="text-success fs-5">{{ offer.currency }} {{ "%.2f"|format(offer.price) }}</span>
              </p>
              {% if offer.old_price %}
              <p class="mb-2 offer-info-text">
                <strong><i class="bi bi-tag"></i> Pre√ßo Antigo:</strong> 
                <span class="text-muted text-decoration-line-through">{{ offer.currency }} {{ "%.2f"|format(offer.old_price) }}</span>
                {% set discount = ((offer.old_price - offer.price) / offer.old_price * 100)|int %}
                <span class="badge bg-danger ms-2">-{{ discount }}%</span>
              </p>
              {% endif %}
              <p class="mb-2 offer-info-text">
                <strong><i class="bi bi-link-45deg"></i> URL:</strong>
                <a href="{{ offer.offer_url }}" target="_blank" class="text-break offer-link">
                  {{ offer.offer_url[:50] }}...
                </a>
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4 text-center">
          {% if offer.product and offer.product.image_url %}
          <img src="{{ offer.product.image_url }}" alt="{{ offer.product.name }}" class="img-fluid rounded" style="max-height: 200px;">
          {% else %}
          <div class="bg-secondary bg-opacity-10 rounded d-flex align-items-center justify-content-center" style="height: 200px;">
            <i class="bi bi-image fs-1 text-muted"></i>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Left Column: Coupons & Template Selection -->
    <div class="col-lg-5">
      
      <!-- Social Network Selection -->
      <div class="card mb-4" style="background: var(--panel-solid); border: 1px solid var(--border-color);">
        <div class="card-header">
          <h6 class="mb-0"><i class="bi bi-grid-3x3-gap"></i> Rede Social</h6>
        </div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <button type="button" class="btn text-start social-btn social-btn-whatsapp" data-channel="whatsapp">
              <i class="bi bi-whatsapp"></i> WhatsApp
            </button>
            <button type="button" class="btn text-start social-btn social-btn-facebook" data-channel="facebook">
              <i class="bi bi-facebook"></i> Facebook
            </button>
            <button type="button" class="btn text-start social-btn social-btn-twitter" data-channel="twitter">
              <i class="bi bi-twitter"></i> Twitter
            </button>
            <button type="button" class="btn text-start social-btn social-btn-instagram" data-channel="instagram">
              <i class="bi bi-instagram"></i> Instagram
            </button>
            <button type="button" class="btn text-start social-btn social-btn-telegram" data-channel="telegram">
              <i class="bi bi-telegram"></i> Telegram
            </button>
          </div>
        </div>
      </div>

      <!-- Coupons Selection -->
      {% if active_coupons %}
      <div class="card mb-4" style="background: var(--panel-solid); border: 1px solid var(--border-color);">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h6 class="mb-0"><i class="bi bi-ticket-perforated"></i> Cupons (Opcional)</h6>
          <div class="btn-group btn-group-sm">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="toggleAllCoupons(true)">
              <i class="bi bi-check-all"></i> Todos
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="toggleAllCoupons(false)">
              <i class="bi bi-x"></i> Nenhum
            </button>
          </div>
        </div>
        <div class="card-body">
          <small class="text-muted d-block mb-3">
            <i class="bi bi-info-circle"></i> Marque os cupons que deseja incluir no texto
          </small>
          <div id="couponsList">
            {% for coupon in active_coupons %}
            <div class="form-check mb-2">
              <input class="form-check-input coupon-checkbox" 
                     type="checkbox" 
                     id="coupon_{{ coupon.id }}"
                     data-coupon-code="{{ coupon.code|e }}"
                     data-coupon-seller="{{ (coupon.seller.name if coupon.seller else 'N/A')|e }}"
                     checked>
              <label class="form-check-label" for="coupon_{{ coupon.id }}">
                <code>{{ coupon.code }}</code>
                {% if coupon.seller %}
                <small class="text-muted">- {{ coupon.seller.name }}</small>
                {% endif %}
              </label>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endif %}

      <!-- Template Selection -->
      <div class="card mb-4" style="background: var(--panel-solid); border: 1px solid var(--border-color);">
        <div class="card-header">
          <h6 class="mb-0"><i class="bi bi-file-earmark-text"></i> Template</h6>
        </div>
        <div class="card-body">
          {% if templates %}
          <div class="list-group">
            {% for template in templates %}
            <button type="button" 
                    class="list-group-item list-group-item-action template-btn"
                    data-template-id="{{ template.id }}"
                    data-template-name="{{ template.name|e }}"
                    data-template-body="{{ template.body|e }}">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="mb-1">
                    <i class="bi bi-file-earmark-text-fill"></i>
                    {{ template.name }}
                  </h6>
                  <p class="mb-0 text-muted small">
                    {{ template.description or 'Sem descri√ß√£o' }}
                  </p>
                </div>
                {% if template.social_networks %}
                <span class="badge bg-primary bg-opacity-25">
                  {{ template.social_networks|length }} redes
                </span>
                {% endif %}
              </div>
            </button>
            {% endfor %}
          </div>
          {% else %}
          <div class="alert alert-warning mb-0">
            <i class="bi bi-exclamation-triangle"></i>
            Nenhum template cadastrado. <a href="{{ url_for('web.create_template') }}">Criar template</a>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Right Column: Generated Text -->
    <div class="col-lg-7">
      <div class="card sticky-top" style="background: var(--panel-solid); border: 1px solid var(--border-color); top: 20px;">
        <div class="card-header">
          <h6 class="mb-0 generated-text-header">
            <i class="bi bi-chat-text"></i> Texto Gerado
            <span id="selectedChannel" class="badge bg-secondary ms-2 channel-badge">Selecione uma rede social</span>
          </h6>
        </div>
        <div class="card-body">
          <div id="noSelectionMessage" class="text-center py-5 no-selection-msg">
            <i class="bi bi-arrow-left fs-1"></i>
            <p class="mt-3">
              Selecione uma rede social e um template para gerar o texto
            </p>
          </div>
          
          <div id="generatedTextArea" style="display: none;">
            <textarea 
              id="generatedText" 
              class="form-control mb-3" 
              rows="15" 
              readonly
              style="font-family: monospace; background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color); resize: vertical;"></textarea>
            
            <div class="d-grid gap-2">
              <button type="button" class="btn btn-primary" onclick="copyGeneratedText()">
                <i class="bi bi-clipboard"></i> Copiar Texto
              </button>
              <button type="button" class="btn btn-outline-secondary" onclick="resetSelection()">
                <i class="bi bi-arrow-counterclockwise"></i> Gerar Novamente
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Offer data
const offerData = {
  id: {{ offer.id }},
  product_name: {{ (offer.product.name if offer.product else '')|tojson }},
  price: {{ "%.2f"|format(offer.price) if offer.price else 0 }},
  old_price: {{ "%.2f"|format(offer.old_price) if offer.old_price else 0 }},
  currency: {{ offer.currency|tojson }},
  vendor_name: {{ offer.vendor_name|tojson }},
  offer_url: {{ offer.offer_url|tojson }},
  seller: {{ (offer.seller.name if offer.seller else '')|tojson }},
  category: {{ (offer.category.name if offer.category else '')|tojson }},
  manufacturer: {{ (offer.manufacturer.name if offer.manufacturer else '')|tojson }}
};

// Social network configs (prefix/suffix)
const socialConfigs = {{ social_configs|tojson }};

// Pre-selected channel from URL parameter
const preSelectedChannel = {{ selected_channel|tojson }};

// Current selections
let selectedChannel = null;
let selectedTemplate = null;

// Toggle all coupons
function toggleAllCoupons(checked) {
  const checkboxes = document.querySelectorAll('.coupon-checkbox');
  checkboxes.forEach(checkbox => {
    checkbox.checked = checked;
  });
}

// Wait for DOM to load
document.addEventListener('DOMContentLoaded', function() {
  // Social network button click
  document.querySelectorAll('.social-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      // Remove active class from all
      document.querySelectorAll('.social-btn').forEach(b => b.classList.remove('active'));
      // Add active to clicked
      this.classList.add('active');
      // Store selected channel
      selectedChannel = this.getAttribute('data-channel');
      // Update badge
      document.getElementById('selectedChannel').textContent = this.textContent.trim();
      // Generate text if template is also selected
      if (selectedTemplate) {
        generateText();
      }
    });
  });

  // Template button click
  document.querySelectorAll('.template-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      // Remove active class from all
      document.querySelectorAll('.template-btn').forEach(b => b.classList.remove('active'));
      // Add active to clicked
      this.classList.add('active');
      // Store selected template
      selectedTemplate = {
        id: this.getAttribute('data-template-id'),
        name: this.getAttribute('data-template-name'),
        body: this.getAttribute('data-template-body')
      };
      // Generate text if channel is also selected
      if (selectedChannel) {
        generateText();
      }
    });
  });
  
  // Auto-select first social network or pre-selected from URL
  const socialButtons = document.querySelectorAll('.social-btn');
  if (socialButtons.length > 0) {
    let buttonToSelect = null;
    
    // Check if there's a pre-selected channel from URL
    if (preSelectedChannel) {
      // Find button matching the channel
      socialButtons.forEach(btn => {
        if (btn.getAttribute('data-channel').toLowerCase() === preSelectedChannel) {
          buttonToSelect = btn;
        }
      });
    }
    
    // If no match from URL or no URL parameter, select first button
    if (!buttonToSelect) {
      buttonToSelect = socialButtons[0];
    }
    
    // Auto-select the button
    if (buttonToSelect) {
      buttonToSelect.classList.add('active');
      selectedChannel = buttonToSelect.getAttribute('data-channel');
      document.getElementById('selectedChannel').textContent = buttonToSelect.textContent.trim();
    }
  }
});

// Generate text
function generateText() {
  if (!selectedChannel || !selectedTemplate) {
    return;
  }

  // Decode HTML entities
  const textarea = document.createElement('textarea');
  textarea.innerHTML = selectedTemplate.body;
  let text = textarea.value;

  // Replace namespaces with actual values
  text = text.replace(/{product_name}/gi, offerData.product_name || '');
  text = text.replace(/{product}/gi, offerData.product_name || '');
  
  text = text.replace(/{price}/gi, offerData.price || '');
  text = text.replace(/{valor}/gi, offerData.price || '');
  text = text.replace(/{old_price}/gi, offerData.old_price || '');
  text = text.replace(/{preco_antigo}/gi, offerData.old_price || '');
  
  // Calculate discount
  if (offerData.old_price && offerData.price) {
    const oldPrice = parseFloat(offerData.old_price);
    const price = parseFloat(offerData.price);
    if (oldPrice > price) {
      const discount = Math.round(((oldPrice - price) / oldPrice) * 100);
      text = text.replace(/{discount}/gi, discount + '%');
      text = text.replace(/{desconto}/gi, discount + '%');
    } else {
      text = text.replace(/{discount}/gi, '');
      text = text.replace(/{desconto}/gi, '');
    }
  } else {
    text = text.replace(/{discount}/gi, '');
    text = text.replace(/{desconto}/gi, '');
  }
  
  text = text.replace(/{vendor_name}/gi, offerData.vendor_name || '');
  text = text.replace(/{vendor}/gi, offerData.vendor_name || '');
  text = text.replace(/{seller}/gi, offerData.seller || offerData.vendor_name || '');
  text = text.replace(/{seller_name}/gi, offerData.seller || '');
  text = text.replace(/{loja}/gi, offerData.vendor_name || '');
  
  text = text.replace(/{offer_url}/gi, offerData.offer_url || '');
  text = text.replace(/{url}/gi, offerData.offer_url || '');
  text = text.replace(/{link}/gi, offerData.offer_url || '');
  
  text = text.replace(/{category}/gi, offerData.category || '');
  text = text.replace(/{manufacturer}/gi, offerData.manufacturer || '');

  // Collect selected coupons
  const selectedCoupons = [];
  document.querySelectorAll('.coupon-checkbox:checked').forEach(checkbox => {
    selectedCoupons.push({
      code: checkbox.getAttribute('data-coupon-code'),
      seller: checkbox.getAttribute('data-coupon-seller')
    });
  });

  // Replace {all_coupons} namespace
  if (selectedCoupons.length > 0) {
    const allCouponsInline = 'CUPONS: ' + selectedCoupons.map(c => c.code).join(', ');
    text = text.replace(/{all_coupons}/gi, allCouponsInline);
    text = text.replace(/{todos_cupons}/gi, allCouponsInline);
    text = text.replace(/{cupons}/gi, allCouponsInline);
  } else {
    text = text.replace(/{all_coupons}/gi, '');
    text = text.replace(/{todos_cupons}/gi, '');
    text = text.replace(/{cupons}/gi, '');
  }

  // Append coupons list if selected
  if (selectedCoupons.length > 0) {
    text += '\n\nüéüÔ∏è CUPONS DISPON√çVEIS:\n';
    selectedCoupons.forEach(coupon => {
      text += `‚Ä¢ ${coupon.code} - ${coupon.seller}\n`;
    });
  }

  // Apply social network prefix/suffix
  if (socialConfigs[selectedChannel]) {
    const config = socialConfigs[selectedChannel];
    if (config.prefix_text) {
      text = config.prefix_text + '\n\n' + text;
    }
    if (config.suffix_text) {
      text = text + '\n\n' + config.suffix_text;
    }
  }

  // Display generated text
  document.getElementById('noSelectionMessage').style.display = 'none';
  document.getElementById('generatedTextArea').style.display = 'block';
  document.getElementById('generatedText').value = text;
}

// Copy generated text
function copyGeneratedText() {
  const textarea = document.getElementById('generatedText');
  textarea.select();
  document.execCommand('copy');
  
  // Show toast notification
  showToast('Texto copiado!', 'success');
}

// Reset selection
function resetSelection() {
  selectedChannel = null;
  selectedTemplate = null;
  
  document.querySelectorAll('.social-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.template-btn').forEach(b => b.classList.remove('active'));
  
  document.getElementById('noSelectionMessage').style.display = 'block';
  document.getElementById('generatedTextArea').style.display = 'none';
  document.getElementById('selectedChannel').textContent = 'Selecione uma rede social';
}

// Toast notification function
function showToast(message, type = 'success') {
  const toastContainer = document.getElementById('toastContainer') || createToastContainer();
  
  const toastEl = document.createElement('div');
  toastEl.className = `toast align-items-center text-white bg-${type} border-0`;
  toastEl.setAttribute('role', 'alert');
  toastEl.innerHTML = `
    <div class="d-flex">
      <div class="toast-body">${message}</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  `;
  
  toastContainer.appendChild(toastEl);
  const toast = new bootstrap.Toast(toastEl, { delay: 5000 });
  toast.show();
  
  toastEl.addEventListener('hidden.bs.toast', () => {
    toastEl.remove();
  });
}

function createToastContainer() {
  const container = document.createElement('div');
  container.id = 'toastContainer';
  container.className = 'toast-container position-fixed top-0 end-0 p-3';
  container.style.zIndex = '9999';
  document.body.appendChild(container);
  return container;
}
</script>

<style>
/* Active button styling */
.social-btn.active,
.template-btn.active {
  background-color: var(--bs-btn-hover-bg) !important;
  border-color: var(--bs-btn-hover-border-color) !important;
  color: var(--bs-btn-hover-color) !important;
}

body[data-theme="dark"] .social-btn.active,
html[data-theme="dark"] .social-btn.active {
  color: white !important;
}

body[data-theme="dark"] .template-btn.active,
html[data-theme="dark"] .template-btn.active {
  background-color: rgba(59, 130, 246, 0.2) !important;
  color: #60a5fa !important;
  border-color: #60a5fa !important;
}

/* Make template buttons look better */
.template-btn {
  text-align: left;
  transition: all 0.2s ease;
}

.template-btn:hover {
  transform: translateX(5px);
}

/* Sticky positioning for generated text card */
@media (min-width: 992px) {
  .sticky-top {
    position: sticky !important;
  }
}

/* Ensure textarea is readable in dark theme */
#generatedText {
  font-size: 14px;
  line-height: 1.6;
}

body[data-theme="dark"] #generatedText,
html[data-theme="dark"] #generatedText {
  background-color: #1a1a1a !important;
  color: #e5e5e5 !important;
  border-color: #404040 !important;
}

body[data-theme="light"] #generatedText,
html[data-theme="light"] #generatedText {
  background-color: #ffffff !important;
  color: #212529 !important;
  border-color: #dee2e6 !important;
}

/* Fix offer info text colors in dark theme */
body[data-theme="dark"] .offer-info-text,
html[data-theme="dark"] .offer-info-text {
  color: #ffffff !important;
}

body[data-theme="dark"] .offer-info-text strong,
html[data-theme="dark"] .offer-info-text strong {
  color: #ffffff !important;
}

body[data-theme="dark"] .offer-value,
html[data-theme="dark"] .offer-value {
  color: #e5e5e5 !important;
}

body[data-theme="light"] .offer-info-text,
html[data-theme="light"] .offer-info-text {
  color: #212529 !important;
}

body[data-theme="light"] .offer-value,
html[data-theme="light"] .offer-value {
  color: #495057 !important;
}

body[data-theme="dark"] .text-muted,
html[data-theme="dark"] .text-muted {
  color: #9ca3af !important;
}

body[data-theme="dark"] .card-header h5,
body[data-theme="dark"] .card-header h6,
html[data-theme="dark"] .card-header h5,
html[data-theme="dark"] .card-header h6 {
  color: var(--text-primary) !important;
}

body[data-theme="dark"] .offer-description,
html[data-theme="dark"] .offer-description {
  color: #d1d5db !important;
}

body[data-theme="light"] .offer-description,
html[data-theme="light"] .offer-description {
  color: #6b7280 !important;
}

/* Ensure all text in social network buttons is visible */
body[data-theme="dark"] .social-btn,
html[data-theme="dark"] .social-btn {
  color: white !important;
  border-width: 2px !important;
}

body[data-theme="dark"] .social-btn.active,
html[data-theme="dark"] .social-btn.active {
  color: white !important;
  background-color: rgba(255, 255, 255, 0.1) !important;
}

body[data-theme="dark"] .btn,
html[data-theme="dark"] .btn {
  color: #e5e5e5 !important;
}

body[data-theme="dark"] .btn-outline-primary,
html[data-theme="dark"] .btn-outline-primary {
  color: #60a5fa !important;
  border-color: #60a5fa !important;
}

body[data-theme="dark"] .btn-outline-primary:hover,
html[data-theme="dark"] .btn-outline-primary:hover {
  color: white !important;
  background-color: #60a5fa !important;
}

body[data-theme="dark"] .btn-outline-secondary,
html[data-theme="dark"] .btn-outline-secondary {
  color: #9ca3af !important;
  border-color: #6b7280 !important;
}

body[data-theme="dark"] .btn-outline-secondary:hover,
html[data-theme="dark"] .btn-outline-secondary:hover {
  color: white !important;
  background-color: #6b7280 !important;
}

/* Ensure coupon labels are readable */
body[data-theme="dark"] .form-check-label,
html[data-theme="dark"] .form-check-label {
  color: var(--text-primary) !important;
}

body[data-theme="dark"] .form-check-label small,
html[data-theme="dark"] .form-check-label small {
  color: #9ca3af !important;
}

/* Ensure links are visible in dark theme */
body[data-theme="dark"] .offer-link,
html[data-theme="dark"] .offer-link {
  color: #60a5fa !important;
}

body[data-theme="dark"] .offer-link:hover,
html[data-theme="dark"] .offer-link:hover {
  color: #93c5fd !important;
}

/* COMPREHENSIVE DARK THEME FIX - ALL TEXTS */
body[data-theme="dark"] .card,
html[data-theme="dark"] .card {
  color: #e5e5e5 !important;
}

body[data-theme="dark"] .card-header,
html[data-theme="dark"] .card-header {
  color: #ffffff !important;
}

body[data-theme="dark"] .card-header h5,
body[data-theme="dark"] .card-header h6,
html[data-theme="dark"] .card-header h5,
html[data-theme="dark"] .card-header h6 {
  color: #ffffff !important;
}

body[data-theme="dark"] .card-body,
html[data-theme="dark"] .card-body {
  color: #e5e5e5 !important;
}

body[data-theme="dark"] h1,
body[data-theme="dark"] h2,
body[data-theme="dark"] h3,
body[data-theme="dark"] h4,
body[data-theme="dark"] h5,
body[data-theme="dark"] h6,
html[data-theme="dark"] h1,
html[data-theme="dark"] h2,
html[data-theme="dark"] h3,
html[data-theme="dark"] h4,
html[data-theme="dark"] h5,
html[data-theme="dark"] h6 {
  color: #ffffff !important;
}

body[data-theme="dark"] p,
html[data-theme="dark"] p {
  color: #e5e5e5 !important;
}

body[data-theme="dark"] .text-muted,
html[data-theme="dark"] .text-muted {
  color: #9ca3af !important;
}

body[data-theme="dark"] small,
html[data-theme="dark"] small {
  color: #d1d5db !important;
}

body[data-theme="dark"] label,
html[data-theme="dark"] label {
  color: #e5e5e5 !important;
}

body[data-theme="dark"] .list-group-item,
html[data-theme="dark"] .list-group-item {
  background-color: var(--panel-solid) !important;
  color: #e5e5e5 !important;
  border-color: var(--border-color) !important;
}

body[data-theme="dark"] .list-group-item h6,
html[data-theme="dark"] .list-group-item h6 {
  color: #ffffff !important;
}

body[data-theme="dark"] .list-group-item p,
html[data-theme="dark"] .list-group-item p {
  color: #9ca3af !important;
}

body[data-theme="dark"] .list-group-item:hover,
html[data-theme="dark"] .list-group-item:hover {
  background-color: rgba(255, 255, 255, 0.05) !important;
}

body[data-theme="dark"] code,
html[data-theme="dark"] code {
  color: #fbbf24 !important;
  background-color: rgba(251, 191, 36, 0.1) !important;
}

body[data-theme="dark"] .alert,
html[data-theme="dark"] .alert {
  color: #e5e5e5 !important;
}

body[data-theme="dark"] .alert-info,
html[data-theme="dark"] .alert-info {
  background-color: rgba(59, 130, 246, 0.1) !important;
  border-color: rgba(59, 130, 246, 0.3) !important;
  color: #e5e5e5 !important;
}

body[data-theme="dark"] .alert-warning,
html[data-theme="dark"] .alert-warning {
  background-color: rgba(245, 158, 11, 0.1) !important;
  border-color: rgba(245, 158, 11, 0.3) !important;
  color: #e5e5e5 !important;
}

body[data-theme="dark"] .no-selection-msg,
html[data-theme="dark"] .no-selection-msg {
  color: #9ca3af !important;
}

body[data-theme="dark"] .no-selection-msg i,
html[data-theme="dark"] .no-selection-msg i {
  color: #6b7280 !important;
}

body[data-theme="dark"] .no-selection-msg p,
html[data-theme="dark"] .no-selection-msg p {
  color: #9ca3af !important;
}

body[data-theme="dark"] .badge,
html[data-theme="dark"] .badge {
  color: white !important;
}

body[data-theme="dark"] .page-title,
html[data-theme="dark"] .page-title {
  color: #ffffff !important;
}

body[data-theme="dark"] .btn-back,
html[data-theme="dark"] .btn-back {
  color: #9ca3af !important;
  border-color: #6b7280 !important;
}

body[data-theme="dark"] .btn-back:hover,
html[data-theme="dark"] .btn-back:hover {
  color: white !important;
  background-color: #6b7280 !important;
  border-color: #6b7280 !important;
}

body[data-theme="dark"] .generated-text-header,
html[data-theme="dark"] .generated-text-header {
  color: #ffffff !important;
}

body[data-theme="dark"] .channel-badge,
html[data-theme="dark"] .channel-badge {
  color: white !important;
  background-color: #6b7280 !important;
}

body[data-theme="dark"] .btn-primary,
html[data-theme="dark"] .btn-primary {
  color: white !important;
}

/* Social buttons - all with colored backgrounds */

/* WhatsApp */
.social-btn-whatsapp {
  background: #25d366 !important;
  color: white !important;
  border: none !important;
}

.social-btn-whatsapp:hover {
  background: #20ba5a !important;
  color: white !important;
}

.social-btn-whatsapp.active {
  background: #1da851 !important;
  color: white !important;
  box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.3);
}

/* Facebook */
.social-btn-facebook {
  background: #1877f2 !important;
  color: white !important;
  border: none !important;
}

.social-btn-facebook:hover {
  background: #166fe5 !important;
  color: white !important;
}

.social-btn-facebook.active {
  background: #1467d8 !important;
  color: white !important;
  box-shadow: 0 0 0 3px rgba(24, 119, 242, 0.3);
}

/* Twitter */
.social-btn-twitter {
  background: #1da1f2 !important;
  color: white !important;
  border: none !important;
}

.social-btn-twitter:hover {
  background: #1a94da !important;
  color: white !important;
}

.social-btn-twitter.active {
  background: #1787c2 !important;
  color: white !important;
  box-shadow: 0 0 0 3px rgba(29, 161, 242, 0.3);
}

/* Instagram */
.social-btn-instagram {
  background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%) !important;
  color: white !important;
  border: none !important;
}

.social-btn-instagram:hover {
  background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%) !important;
  color: white !important;
  opacity: 0.9;
}

.social-btn-instagram.active {
  background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%) !important;
  color: white !important;
  box-shadow: 0 0 0 3px rgba(225, 48, 108, 0.3);
}

/* Telegram */
.social-btn-telegram {
  background: #0088cc !important;
  color: white !important;
  border: none !important;
}

.social-btn-telegram:hover {
  background: #007ab8 !important;
  color: white !important;
}

.social-btn-telegram.active {
  background: #006ca5 !important;
  color: white !important;
  box-shadow: 0 0 0 3px rgba(0, 136, 204, 0.3);
}

/* Ensure all social buttons have white text */
.social-btn {
  color: white !important;
  font-weight: 500;
  transition: all 0.2s ease;
}

body[data-theme="dark"] .social-btn,
html[data-theme="dark"] .social-btn {
  color: white !important;
}
</style>

{% endblock %}

